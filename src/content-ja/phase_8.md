## Phase 8: 評価と反復

**目的**: スキルが実際に機能するか検証し、改善する

### Step 1: 評価シナリオの構築

スキル作成**後**に最低3つの評価シナリオを用意する：

| シナリオ種別 | 内容 |
|------------|------|
| **基本タスク** | スキルの最も典型的な使用場面 |
| **エッジケース** | 境界条件や例外的な状況 |
| **複合タスク** | 他のスキルや情報と組み合わせて使う場面 |
評価シナリオの形式例：

```json
{
  "skills": ["my-skill-name"],
  "query": "ユーザーが実際に入力するリクエスト",
  "files": ["test-files/sample-input.ext"],
  "expected_behavior": [
    "期待される動作1",
    "期待される動作2"
  ]
}
```
### Step 2: A/B テストパターン

> 1. **Claude A**（エキスパート）: スキルの設計・改善を担当
> 2. **Claude B**（ユーザー）: スキルを使って実際のタスクを実行
> 3. Claude B の挙動を観察 → Claude A にフィードバック → 改善

### Step 3: 反復ループ

```
評価シナリオ実行 → 出力を観察 → 問題を特定 → SKILL.md 修正 → 再評価
```

#### 3a: 出力品質の確認

- スキルが意図したタイミングで（のみ）自動呼び出しされるか
- 出力品質がスキルなし時（Phase 1 のベースライン）と比較して向上しているか
- トークン消費が妥当か（過剰な情報をロードしていないか）
- 異なるモデル（Haiku / Sonnet / Opus）で期待通り動作するか

#### 3b: Claude のナビゲーション観察

スキル使用時の Claude の行動を以下の4観点で観察する：

| 観点 | 意味 | 対処 |
|------|------|------|
| **予期しない探索パス** | ファイルを意図しない順序で読む | 構造やリンクを見直す |
| **参照の見落とし** | 重要ファイルへの参照をたどらない | リンクをより明示的にする |
| **特定セクションへの過度な依存** | 同じファイルを繰り返し読む | その内容を SKILL.md 本体に移動 |
| **未使用コンテンツ** | バンドルファイルに一度もアクセスしない | 削除を検討 |

#### 3c: 簡潔性・アーキテクチャレビュー

反復のたびに以下も確認する：
- **簡潔性**: 「Claude が既に知っている説明を削除できないか？」
- **情報アーキテクチャ**: 「コンテンツを別ファイルに分離すべきか？構成を改善できないか？」

### トラブルシューティング

| 問題 | 対処法 |
|------|--------|
| **スキルが起動しない** | description のキーワードを確認。`/skill-name` で直接呼び出して検証 |
| **スキルが起動しすぎる** | description をより具体的に。`disable-model-invocation: true` を検討 |
| **コンテキスト予算超過** | description 全体の予算はコンテキストウィンドウの2%。スキル数を減らすか description を短縮 |
| **出力が不安定** | 自由度を下げる（テキスト指示 → スクリプト）。テンプレートで出力形式を固定 |

---

